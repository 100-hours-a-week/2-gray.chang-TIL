<img src="/Tracking_Time/2_Feb/250217.png">

|      단어      |                의미                | 비고                                                                                                                                                                 |
|:------------:|:--------------------------------:|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      쿠키      |   클라이언트가 웹페이지 정보를 로컬에 저장하는 파일    |                                                                                                                                                                    |
|   퍼스트파티 쿠키   |    사용자가 직접 방문한 사이트에서만 설정되는 쿠키    | 사용자가 방문한 웹사이트와 쿠키가 발행되는 도메인이 같음<br/>클라이언트의 웹사이트 경험 최적화를 위해 사용됨                                                                                                     |
|   서드파티 쿠키    |     사용자가 직접 방문하지 않아도 설정되는 쿠키     | 사용자가 방문한 웹사이트와 쿠키가 발행되는 도메인이 다름<br/>개인화 광고 서비스 제공 등 사용되는 등 제3자의 서비스를 위해 사용됨                                                                                        |
|   쿠키 보안 속성   |      쿠키를 안전하게 발행하기 위한 보안 속성      | HttpOnly, Secure, SameSite가 있음<br/>HttpsOnly : 자바스크립트를 통한 쿠키 접근 차단<br/>Secure : 쿠키가 HTTPS 프로토콜을 통해서만 전달되도록 설정(중간자공격 방지)<br/>SameSite : 서드파티 쿠키에 대한 정책을 설정(CSRF 방지) |
|      세션      | 서로를 인식한 후 데이터 송수신을 종료할 때까지의 상태정보 | 세션은 주로 상태를 유지할 때 사용한다. 로그인 상태 유지가 대표적인 예시이다.                                                                                                                       |
| 세션ID와 쿠키의 관계 |          세션과 쿠키는 협력관계이다          | 세션ID는 클라이언트측 쿠키에 저장되어 서버에 요청 시 전송되어 로그인이 유지될 수 있도록 함                                                                                                               |
|   로컬 스토리지    |  유저가 임의로 삭제하지 않는 한 영원히 저장되는 저장소  | 유효기간은 영구적이며, 장기적으로 저장되어야 하는 데이터를 저장할 때 사용됨(즐겨찾기, 사용자 설정 등)                                                                                                         |
|   세션 스토리지    |      웹 브라우저 창을 닫으면 삭제되는 저장소      | 세션 동안만 유지되며, 브라우저 창을 닫게 되면 삭제된다. 로그인 정보 등 단기적으로 유지해야 하는 정보들을 담을 때 사용됨.                                                                                             |

### HTTP가 본질적으로 Stateless하다는 의미와, 웹 애플리케이션에서 상태 유지를 위해 어떤 기법(예: 세션, 쿠키)을 사용하는지 설명해 주세요.
- HTTP가 stateless(무상태)라는 의미는 서버가 클라이언트의 상태를 기억하지 않는다는 뜻이다. 즉, 서버는 request에 따른 내용만 처리할 뿐이지, 그 이전 클라이언트에서 보낸 request는 기억하지 않는다.
  - stateless한 상태를 유지함으로서 서버는 클라이언트의 상태와 관계없이 확장할 수 있다. 클라이언트 또한 서버에 개의치 않고 확장시킬 수 있다.
  - 하지만 stateless하다는 것은 상태를 기억하지 못한다는 것을 의미하므로, 로그인 등 유저 정보를 필수적으로 기억해야 할 경우를 위해 쿠키, 세션 등의 기술이 사용된다.
- 쿠키는 웹페이지 접속 시 로컬에 저장되는 작은 파일로, 클라이언트에서 서버로 요청 시 항상 같이 전송되는 정보이다.
- 그렇기에 쿠키 기술을 적용하면 상태를 유지할 수 있다.(stateful한 성질을 어느정도 가질 수 있다.)
- 하지만 쿠키는 모든 요청의 헤더에 포함되기 때문에 네트워크 트래픽을 추가로 유발할 수 있다. 또한 유저 정보를 매 요청마다 보내므로 보안에도 취약하다.(중간자공격 등에 취약)<br>
그래서 세션이라는 개념을 함께 사용한다.
- 세션이란 브라우저가 시작되고 종료될 때까지의 상태정보를 의미하며, 세션을 저장하는 별도의 저장소를 서버에 둔다.
- 쿠키에는 세션ID를 저장하고, 세션 ID를 요청마다 보낸다.
- 서버는 세션을 저장하는 저장소에서 세션 ID를 조회하여 사용자 상태를 확인한다.
- 세션을 통해 네트워크 오버헤드를 유발하지 않고 안전하게 상태를 유지할 수 있지만 세션 저장소 조회 성능이 좋아야 하므로 별도의 메모리 관리가 필요하다.

### 쿠키의 만료 시간을 설정하는 Expires와 Max-Age 옵션의 차이점은 무엇인지 설명해 주세요.
- 쿠키의 만료시간을 설정하는 방법에는 ```Expires```와 ```Max-Age```가 있다.
  - ```Expires``` 옵션은 만료되는 날짜를 정의한다. 이 때 날짜는 GMT기준이다.
  - ```Max-Age``` 옵션은 쿠키가 생성되거나 업데이트 된 순간부터 밀리초 단위로 시간(수명)을 설정한다. 

### CSRF 공격이란 무엇이며, SameSite 속성을 통해 이를 어떻게 예방할 수 있는지 설명해 주세요.
- CSRF(Cross Site Request Forgery)란 사이트 요청 위조를 뜻한다. 사용자가 자신의 의지와 무관하게 특정 행위를 다른 웹사이트에 요청하게 하는 공격 기법이다.
  1. 사용자가 웹사이트에 접속하여 로그인한다.
  2. 로그인이 성공적이면 서버는 세션ID를 사용자에게 보내주고, 사용자는 이것을 쿠키에 저장한다.
  3. 사용자가 CSRF가 적용된 스크립트 탑재 게시물을 클릭한다.
  4. 세션ID가 탑재된 요청이 피싱 서버로 들어가게 된다.
  5. 세션ID를 입수한 피싱 서버는 원래 서버에 세션 ID를 기반으로 사용자가 의도하지 않은 동작을 수행할 수 있다.
- 이 공격을 예방하기 위해 쿠키 설정 옵션에는 ```SameSite```라는 옵션이 있다.
  - ```SameSite```란 같은 도메인에서 발행된 쿠키만 전송되게 하는 정책을 설정하는 옵션으로, None, Lax, Strict가 있다.
    - None : 모든 요청에 쿠키 전송
    - Lax : Method-safe한 메서드에 한해서 타 도메인에서 쿠키 전송 가능
    - Strict : 무조건 같은 사이트에서만 쿠키 전송
  - 현재 크롬은 Lax를 사용중이며, 이를 통해 광고 개인화 등 사용자의 의도된 서드파티 쿠키를 유지하면서 보안성을 강화시켰다.

### XSS 공격의 동작 원리와, HttpOnly 속성이 쿠키를 보호하는 방식에 대해 설명해 주세요.
- XSS(Cross Site Scripting)란 유저가 악의적인 스크립트를 실행하게 만들어 쿠키를 탈취하는 방식이다.
- 이 공격의 핵심은 악의적인 스크립트를 실행시킨다는 점인데, 이를 방지하기 위해 쿠키 옵션에 ```HttpOnly```라는 옵션을 추가한다.
- 이것은 http 프로토콜을 통해서만 쿠키에 접근하도록 통제하는 옵션이고, 이 옵션을 활성화한다면 자바스크립트로 쿠키 접근이 불가능하다.