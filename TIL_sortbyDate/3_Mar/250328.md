<img src="/Tracking_Time/3_Mar/250328.png">

## Docker Image Layer 구조와 레이어 개념이 Docker Cache에 어떻게 활용되는지 서술하시오.



### 도커의 레이어 구조
- 도커의 이미지는 레이어 구조로 이루어져 있음.
- 이 구조는 이미지의 변경사항을 계층적으로 저장하고 재사용할 수 있게 해줌
- 레이어란? 읽기 전용파일 시스템
  - 도커파일의 각 명령어는 하나의 레이어를 생성함
  - 맨 마지막 레이어에 컨테이너가 생성되면 쓰기 가능한 레이어가 추가됨(컨테이너 레이어)
- 레이어는 스택처럼 쌓이며 위에서 아래로 접근 가능
```dockerfile
FROM ubuntu:20.04      # 레이어 1: 베이스 이미지
RUN apt update         # 레이어 2
RUN apt install -y python3 # 레이어 3
COPY . /app            # 레이어 4
```
### 도커 레이어와 캐시의 활용
- 도커 빌드 시 매번 모든 레이어를 빌드하면 속도가 느려질 수 있다. 이에 대한 해결책으로 도커 레이어 캐시가 등장했다.
- 각 레이어에 대한 변경사항이 없다면 기존 레이어를 재사용한다.(일반 캐시와 내용이 참 유사하다)
- 다만, 코드가 변경되면 해당 레이어는 무효화되고 다시 빌드되며, 레이어는 스택구조로 쌓이므로 이후의 레이어도 변경 유무와 상관없이 다시 빌드된다.
  - 변경이 잦은 레이어를 맨 마지막에 배치하는 것이 중요하다. 
- 캐시의 장점
  - 빠른 빌드 시간
  - 효율적인 리소스 사용
  - 배포 최적화